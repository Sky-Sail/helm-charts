image:
  repository: docker.io/pritunl/pritunl-zero
  pullPolicy: IfNotPresent
  tag: ""

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

serviceAccount:
  create: false
  automount: true
  annotations: {}
  name: ""

podAnnotations: {}
podLabels: {}

podSecurityContext:
  fsGroup: 2000

securityContext:
  capabilities:
    drop:
      - ALL
  readOnlyRootFilesystem: true
  runAsNonRoot: true
  runAsUser: 1000

service:
  type: ClusterIP
  port: 80

# Pritunl Zero environment variables
# Required: MongoDB connection URI
# Format: mongodb://[username:password@]host[:port][/database]
env:
  # MONGO_URI is required for Pritunl Zero to connect to MongoDB
  # Can be set directly or loaded from an existing secret
  MONGO_URI: ""
  # NODE_ID is required and must be unique for each node
  NODE_ID: ""
  # Optional: Additional environment variables
  # Additional env vars can be added here as key-value pairs
  # Example:
  # LOG_LEVEL: "info"
  # DEBUG: "false"

# MongoDB secret configuration
# Use an existing Kubernetes secret for MongoDB credentials
# This allows you to store the MONGO_URI securely in a secret instead of in values.yaml
mongoSecret:
  # Enable using an existing secret for MONGO_URI
  enabled: false
  # Name of the existing secret (must exist in the same namespace)
  name: ""
  # Key in the secret that contains the MONGO_URI
  # The secret should contain the full MongoDB connection string:
  # Format: mongodb://[username:password@]host[:port][/database]
  # Example: mongodb://user:password@mongo.example.com:27017/pritunl-zero
  key: "mongo-uri"

# This block is for setting up the ingress for more information can be found here: https://kubernetes.io/docs/concepts/services-networking/ingress/
ingress:
  enabled: false
  className: ""
  annotations: {}
  # kubernetes.io/ingress.class: nginx
  # kubernetes.io/tls-acme: "true"
  # Domain list - automatically creates hosts entries for each domain
  # If domains are specified, hosts will be generated automatically
  domains: []
  # - example.com
  # - app.example.com
  # Manual hosts configuration (used if domains is empty)
  hosts:
    - host: chart-example.local
  tls: []
  #  - secretName: chart-example-tls
  #    hosts:
  #      - chart-example.local

  # Node Management Ingress - Separate ingress for node management/admin interface
  nodeManagement:
    enabled: false
    className: ""
    annotations: {}
    # Domain list for node management
    domains: []
    # - manage.example.com
    # - admin.example.com
    # Manual hosts configuration (used if domains is empty)
    hosts: []
    # - host: manage.example.com
    tls: []
    #  - secretName: node-management-tls
    #    hosts:
    #      - manage.example.com

# Gateway API (HTTPRoute) - Kubernetes Gateway API standard
# More information: https://gateway-api.sigs.k8s.io/
gateway:
  enabled: false
  annotations: {}
  # Gateway name to attach HTTPRoute to (must exist in the cluster)
  gatewayName: ""
  # Gateway namespace (defaults to release namespace)
  gatewayNamespace: ""
  # Parent references (alternative to gatewayName)
  # parentRefs:
  #   - name: my-gateway
  #     namespace: default
  # Domain list - automatically creates hostnames entries for each domain
  # If domains are specified, hosts will be generated automatically
  domains: []
  # - example.com
  # - app.example.com
  # Manual hosts configuration (used if domains is empty)
  hosts:
    - hostname: chart-example.local
    # Optional: TLS configuration
    # tls:
    #   certificateRefs:
    #     - name: chart-example-tls
  # Optional: filters for gateway rules
  # filters:
  #   - type: RequestHeaderModifier
  #     requestHeaderModifier:
  #       set:
  #         - name: X-Forwarded-Proto
  #           value: https

  # Node Management HTTPRoute - Separate HTTPRoute for node management/admin interface
  nodeManagement:
    enabled: false
    annotations: {}
    # Gateway name to attach HTTPRoute to (defaults to gateway.gatewayName if not specified)
    gatewayName: ""
    # Gateway namespace (defaults to gateway.gatewayNamespace or release namespace)
    gatewayNamespace: ""
    # Parent references (alternative to gatewayName)
    # parentRefs:
    #   - name: my-gateway
    #     namespace: default
    # Domain list for node management
    domains: []
    # - manage.example.com
    # - admin.example.com
    # Manual hosts configuration (used if domains is empty)
    hosts: []
    # - hostname: manage.example.com
    #   tls:
    #     certificateRefs:
    #       - name: node-management-tls
    # Optional: filters for node management rules
    # filters:
    #   - type: RequestHeaderModifier
    #     requestHeaderModifier:
    #       set:
    #         - name: X-Forwarded-Proto
    #           value: https

resources:
  # We usually recommend not to specify default resources and to leave this as a conscious
  # choice for the user. This also increases chances charts run on environments with little
  # resources, such as Minikube. If you do want to specify resources, uncomment the following
  # lines, adjust them as necessary, and remove the curly braces after 'resources:'.
  limits:
    cpu: 500m
    memory: 512Mi
  requests:
    cpu: 100m
    memory: 128Mi

# This is to setup the liveness and readiness probes more information can be found here: https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/
livenessProbe:
  httpGet:
    path: /
    port: http
readinessProbe:
  httpGet:
    path: /
    port: http

# Persistence configuration for StatefulSet
# PVC will be mounted at /etc to store Pritunl Zero configuration
persistence:
  enabled: true
  # Storage class for PVC (empty string uses default storage class, "-" disables storage class)
  storageClass: ""
  # Access modes for PVC
  accessModes:
    - ReadWriteOnce
  # Size of PVC
  size: 1Gi

# CA Certificates Init Container
# Init container to initialize and update CA certificates before the main container starts
caCertsSidecar:
  enabled: false
  image:
    repository: alpine
    tag: "latest"
    pullPolicy: IfNotPresent
  # Optional: ConfigMap name containing CA certificates
  # If not specified, uses emptyDir
  # configMap: ""
  # Resources for the init container
  resources:
    limits:
      cpu: 50m
      memory: 32Mi
    requests:
      cpu: 10m
      memory: 16Mi

# Additional volumes on the output StatefulSet definition.
volumes: []
# - name: foo
#   secret:
#     secretName: mysecret
#     optional: false

# Additional volumeMounts on the output StatefulSet definition.
volumeMounts: []
# - name: foo
#   mountPath: "/etc/foo"
#   readOnly: true

nodeSelector: {}

tolerations: []

affinity: {}
